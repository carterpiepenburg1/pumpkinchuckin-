[gd_scene load_steps=21 format=3 uid="uid://cnfyj80sfpkq3"]

[ext_resource type="Script" uid="uid://b0arcax67joif" path="res://Scripts/initializevr.gd" id="1_ua3oe"]
[ext_resource type="Texture2D" uid="uid://ujlhjpujhisj" path="res://Resources/Textures/sky.png" id="2_3n5g3"]
[ext_resource type="Script" uid="uid://blp7t2rm6f3sg" path="res://Scripts/Player/player.gd" id="2_c37g7"]
[ext_resource type="Script" uid="uid://yripqjx66c00" path="res://Scripts/game_manager.gd" id="2_yqnnc"]
[ext_resource type="Script" uid="uid://dnxoog51swnsj" path="res://Scripts/Player/hand.gd" id="3_gfff3"]
[ext_resource type="PackedScene" uid="uid://cy6tf6pp8tta6" path="res://Scenes/Objects/vine.tscn" id="5_8o4mi"]
[ext_resource type="Script" uid="uid://cf6yojo8rcx4y" path="res://Scripts/Slingshot/slingshot.gd" id="6_8o4mi"]
[ext_resource type="Texture2D" uid="uid://sntfeilnq72k" path="res://Resources/Textures/grass.jpg" id="6_ebto2"]

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_ebto2"]
panorama = ExtResource("2_3n5g3")

[sub_resource type="Sky" id="Sky_yqnnc"]
sky_material = SubResource("PanoramaSkyMaterial_ebto2")

[sub_resource type="Environment" id="Environment_2t1jq"]
background_mode = 2
background_color = Color(0.76037085, 0.97431797, 0.9702292, 1)
sky = SubResource("Sky_yqnnc")
fog_light_color = Color(0.73032373, 0.96586627, 0.9999998, 1)
fog_sun_scatter = 0.5
fog_density = 0.0

[sub_resource type="SphereShape3D" id="SphereShape3D_gfff3"]
radius = 0.049555775

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_yqnnc"]
albedo_color = Color(1, 0.62, 0.62, 1)
albedo_texture = ExtResource("6_ebto2")
uv1_scale = Vector3(2000, 2000, 2000)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_8o4mi"]
albedo_color = Color(0.35095242, 0.15484291, 0.07356518, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_3n5g3"]
albedo_color = Color(0.5019608, 0.25882354, 0, 1)

[sub_resource type="CylinderShape3D" id="CylinderShape3D_8o4mi"]
height = 0.5
radius = 0.3

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ebto2"]
transparency = 1
albedo_color = Color(1, 0, 0, 0.4627451)

[sub_resource type="Curve3D" id="Curve3D_ebto2"]

[sub_resource type="CylinderMesh" id="CylinderMesh_ebto2"]

[sub_resource type="CylinderMesh" id="CylinderMesh_yqnnc"]

[node name="Node3D" type="Node3D"]
script = ExtResource("1_ua3oe")

[node name="GameManager" type="Node3D" parent="."]
script = ExtResource("2_yqnnc")

[node name="AdvanceTimer" type="Timer" parent="GameManager"]
wait_time = 5.0
autostart = true

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.08686353, 0.8868179, -0.45388195, -0.15191406, 0.46206695, 0.873737, 0.9845694, -0.006944829, 0.17485687, 0, 5.125532, 0)
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_2t1jq")

[node name="Player" type="XROrigin3D" parent="."]
transform = Transform3D(0.99999976, 0, 0, 0, 1, 0, 0, 0, 0.99999976, 0, 0.123353, 0)
script = ExtResource("2_c37g7")

[node name="XRCamera3D" type="XRCamera3D" parent="Player"]
transform = Transform3D(1.0000002, 0, 0, 0, 1, 0, 0, 0, 1.0000002, 0, 1.3581047, 0)
far = 400.0

[node name="Left" type="XRController3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.5, 1, -0.5)
tracker = &"left_hand"
script = ExtResource("3_gfff3")

[node name="LeftModel" type="CSGSphere3D" parent="Player/Left"]
transform = Transform3D(0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, 0, 0, 0)

[node name="Area" type="Area3D" parent="Player/Left"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player/Left/Area"]
shape = SubResource("SphereShape3D_gfff3")

[node name="Right" type="XRController3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.5, 1, -0.5)
tracker = &"right_hand"
script = ExtResource("3_gfff3")

[node name="RightModel" type="CSGSphere3D" parent="Player/Right"]
transform = Transform3D(0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, 0, 0, 0)

[node name="Area" type="Area3D" parent="Player/Right"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player/Right/Area"]
shape = SubResource("SphereShape3D_gfff3")

[node name="Environment" type="Node3D" parent="."]

[node name="Floor" type="CSGBox3D" parent="Environment"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.5, 0)
size = Vector3(4000, 1, 4000)
material = SubResource("StandardMaterial3D_yqnnc")

[node name="Vine" parent="Environment" instance=ExtResource("5_8o4mi")]
transform = Transform3D(-0.5, 0, -7.54979e-08, 0, 0.5, 0, 7.54979e-08, 0, -0.5, 1.7, 0, 0)

[node name="Vine3" parent="Environment" instance=ExtResource("5_8o4mi")]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, -1.7, 0, 0)

[node name="Vine2" parent="Environment" instance=ExtResource("5_8o4mi")]
transform = Transform3D(0.00034902245, 0, 0.49999985, 0, 0.5, 0, -0.49999985, 0, 0.00034902245, 0, 0, 1.7)

[node name="Slingshot" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.7283299)
script = ExtResource("6_8o4mi")

[node name="RightLog" type="CSGCylinder3D" parent="Slingshot"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0.75, 0)
material_override = SubResource("StandardMaterial3D_8o4mi")
radius = 0.1
height = 1.5

[node name="LeftLog" type="CSGCylinder3D" parent="Slingshot"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1, 0.75, 0)
material_override = SubResource("StandardMaterial3D_8o4mi")
radius = 0.1
height = 1.5

[node name="Sling" type="CSGTorus3D" parent="Slingshot"]
transform = Transform3D(1, 0, 0, 0, -0.64278764, -0.76604444, 0, 0.76604444, -0.64278764, 0, 1.2, 0)
material_override = SubResource("StandardMaterial3D_3n5g3")
inner_radius = 0.22
outer_radius = 0.3
sides = 20
ring_sides = 10

[node name="SlingArea" type="Area3D" parent="Slingshot/Sling"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.12365246, 0.01870814)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Slingshot/Sling/SlingArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.08105409, -0.011571914)
shape = SubResource("CylinderShape3D_8o4mi")

[node name="leftRopeConnect" type="Node3D" parent="Slingshot/Sling"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.25, 0, 0)

[node name="rightRopeConnect" type="Node3D" parent="Slingshot/Sling"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.25, 0, 0)

[node name="Target" type="CSGTorus3D" parent="Slingshot"]
visible = false
material_override = SubResource("StandardMaterial3D_ebto2")
inner_radius = 0.8
sides = 20
ring_sides = 10

[node name="ArcPrediction" type="Path3D" parent="Slingshot"]
visible = false
curve = SubResource("Curve3D_ebto2")

[node name="CSGPolygon3D" type="CSGPolygon3D" parent="Slingshot/ArcPrediction"]
polygon = PackedVector2Array(0, 0, 0, 0.1, 0.1, 0.1, 0.1, 0)
mode = 2
path_node = NodePath("..")
path_interval_type = 0
path_interval = 1.0
path_simplify_angle = 0.0
path_rotation = 2
path_rotation_accurate = false
path_local = false
path_continuous_u = true
path_u_distance = 1.0
path_joined = false
material = SubResource("StandardMaterial3D_ebto2")

[node name="LeftRope" type="MeshInstance3D" parent="Slingshot"]
visible = false
material_override = SubResource("StandardMaterial3D_3n5g3")
mesh = SubResource("CylinderMesh_ebto2")

[node name="RightRope" type="MeshInstance3D" parent="Slingshot"]
visible = false
material_override = SubResource("StandardMaterial3D_3n5g3")
mesh = SubResource("CylinderMesh_yqnnc")

[connection signal="timeout" from="GameManager/AdvanceTimer" to="GameManager" method="_on_advance_timer_timeout"]
[connection signal="button_pressed" from="Player/Left" to="Player" method="_on_left_button_pressed"]
[connection signal="button_released" from="Player/Left" to="Player" method="_on_left_button_released"]
[connection signal="button_pressed" from="Player/Right" to="Player" method="_on_right_button_pressed"]
[connection signal="button_released" from="Player/Right" to="Player" method="_on_right_button_released"]
[connection signal="area_entered" from="Slingshot/Sling/SlingArea" to="Slingshot" method="_on_sling_area_area_entered"]
